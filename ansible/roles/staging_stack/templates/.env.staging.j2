# ===== Global / Shared =====
DB_USER={{ db_user | default('app') }}
DB_PASSWORD={{ db_password | default('secret') }}
READ_CS={{ read_cs | default('Host=read-db;Port=5432;Database=read;Username=' ~ (db_user | default('app')) ~ ';Password=' ~ (db_password | default('secret')) ~ ';Pooling=true') }}
CENTRAL_ID={{ central_id | default('Core-1') }}
CENTRAL_IDS={{ central_ids | default('Core-1') }}
NODES={{ nodes | default('Node=http://storage:50053') }}

# Logging defaults
LOGGING__LOGLEVEL__DEFAULT={{ loglevel_default | default('Information') }}
LOGGING__LOGLEVEL__MICROSOFT_ASPNETCORE={{ loglevel_ms | default('Warning') }}
ALLOWEDHOSTS={{ allowed_hosts | default('*') }}

# ===== Query Service =====
QUERY_READ_CS={{ query_read_cs | default(read_cs) }}

# ===== Projection Service =====
PROJECTION_READ_CS={{ projection_read_cs | default(read_cs) }}

# ===== Storage Service (own DB) =====
STORAGE_DB_NAME={{ storage_db_name | default('storage') }}
STORAGE_DB_USER={{ storage_db_user | default('app') }}
STORAGE_DB_PASSWORD={{ storage_db_password | default('app') }}
STORAGE_CS={{ storage_cs | default('Host=storage-db;Port=5432;Database=' ~ (storage_db_name | default('storage')) ~ ';Username=' ~ (storage_db_user | default('app')) ~ ';Password=' ~ (storage_db_password | default('app')) ~ ';Pooling=true;Maximum Pool Size=50') }}
TIMESCALEDB_TELEMETRY={{ timescaledb_telemetry | default('off') }}

# ===== Ingest =====
VALIDATION_URL={{ validation_url | default('http://validation:50052') }}
STORAGE_URL={{ storage_url | default('http://storage:50053') }}

# ===== Station (Simulator) =====
STATION_ID={{ station_id | default('ST-001') }}
INGEST_URL={{ ingest_url | default('http://ingest:50051') }}
OUTBOX_CS={{ outbox_cs | default('Data Source=/data/outbox.db;Cache=Shared;Mode=ReadWriteCreate') }}
RAIN_ON_SCORE={{ rain_on_score | default(3) }}
RAIN_OFF_SCORE={{ rain_off_score | default(-3) }}
PRESSURE_THRESHOLD_HPA={{ pressure_threshold_hpa | default(950) }}
SENSOR_PRESSURE_MS={{ sensor_pressure_ms | default(400) }}
SENSOR_LIDAR_MS={{ sensor_lidar_ms | default(300) }}
SENSOR_LIDAR_SEED={{ sensor_lidar_seed | default(321) }}
SENSOR_HUMIDITY_MS={{ sensor_humidity_ms | default(500) }}
OUTBOX_BATCH_MAX={{ outbox_batch_max | default(50) }}
OUTBOX_INVISIBILITY_SEC={{ outbox_invisibility_sec | default(30) }}
DOTNET_SYSTEM_NET_HTTP_SOCKETSHTTPHANDLER_HTTP2UNENCRYPTEDSUPPORT={{ h2c | default(true) }}
LOG__Default={{ log_default | default('Information') }}
LOG__Microsoft={{ log_microsoft | default('Warning') }}
